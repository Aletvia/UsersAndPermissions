{% extends "users/base.html" %}
{% load static %}
{% block content %}
<div class="content">

  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-success alert-dismissible fade show" role="alert">
        {{message}}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endfor %}
  {% endif %}

  <div class="container title" >
    <div class="row">
      <div class="col">
        <h2>{{ title }}</h2>
      </div>
      <div class="col-lg-auto">
        <input class="form-control me-2" type="search" placeholder="Buscar" aria-label="Search">
      </div>
      <div class="col-lg-auto">
        <button class="btn btn-outline-info" type="submit">Buscar</button>
      </div>
      <div class="col col-lg-auto">
        <a class="btn btn-outline-info" href="{%url 'create_users' %}">
          <i class="fa fa-user-plus" aria-hidden="true"></i> Agregar usuario
        </a>
      </div>
    </div>
  </div>

  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Correo</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      {%for admin in admin_list %}
      <tr>
        <td>{{admin.first_name}} </td>
        <td>{{admin.email}} </td>
        <td>
          <a class="btn btn-primary btn-sm" href="{% url 'admin_update' admin.id%}"><i class="fa fa-pencil"></i>
            Editar</a>

          <a class="btn btn-danger btn-sm" data-toggle="modal" href="#{{admin.id}}">
            <i class="fa fa-trash"></i> Eliminar
          </a>
          <!-- Vertically centered modal-->
          <div class="modal fade" id="{{admin.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenter"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">{{admin.first_name}}</h5>
                  <button class="close" type="button" data-dismiss="modal" aria-label="Close"><span
                      aria-hidden="true">×</span></button>
                </div>
                <div class="modal-body">
                  <h4 class="text-center">¿Está seguro de que desea eliminar este administrador?</h4>
                </div>
                <div class="modal-footer">
                  <button class="btn btn-light" type="button" data-dismiss="modal">Cancelar</button>

                  <form action="{% url 'admin_delete' admin.id%}" method="POST">{% csrf_token %}
                    <button class="btn btn-danger" type="submit">Eliminar</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </td>

      </tr>
      {% endfor %}
    </tbody>

  </table>
</div>
{% endblock %}
{% block script %}
<script src="{% static 'js/script_in.js' %}"></script>{% endblock %}